/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.12.1 - 2015-02-20
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.typeahead","ui.bootstrap.position","ui.bootstrap.bindHtml","ui.bootstrap.rating"]),angular.module("ui.bootstrap.tpls",["template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html","template/rating/rating.html"]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(t){var e=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(a){var n=a.match(e);if(!n)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+a+'".');return{itemName:n[3],source:t(n[4]),viewMapper:t(n[2]||n[1]),modelMapper:t(n[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(t,e,a,n,i,r,o){var l=[9,13,27,38,40];return{require:"ngModel",link:function(p,c,s,u){var d,f=p.$eval(s.typeaheadMinLength)||1,h=p.$eval(s.typeaheadWaitMs)||0,m=p.$eval(s.typeaheadEditable)!==!1,g=e(s.typeaheadLoading).assign||angular.noop,v=e(s.typeaheadOnSelect),$=s.typeaheadInputFormatter?e(s.typeaheadInputFormatter):void 0,y=s.typeaheadAppendToBody?p.$eval(s.typeaheadAppendToBody):!1,b=p.$eval(s.typeaheadFocusFirst)!==!1,w=e(s.ngModel).assign,x=o.parse(s.typeahead),O=p.$new();p.$on("$destroy",function(){O.$destroy()});var M="typeahead-"+O.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":M});var I=angular.element("<div typeahead-popup></div>");I.attr({id:M,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(s.typeaheadTemplateUrl)&&I.attr("template-url",s.typeaheadTemplateUrl);var H=function(){O.matches=[],O.activeIdx=-1,c.attr("aria-expanded",!1)},k=function(t){return M+"-option-"+t};O.$watch("activeIdx",function(t){0>t?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",k(t))});var V=function(t){var e={$viewValue:t};g(p,!0),a.when(x.source(p,e)).then(function(a){var n=t===u.$viewValue;if(n&&d)if(a.length>0){O.activeIdx=b?0:-1,O.matches.length=0;for(var i=0;i<a.length;i++)e[x.itemName]=a[i],O.matches.push({id:k(i),label:x.viewMapper(O,e),model:a[i]});O.query=t,O.position=y?r.offset(c):r.position(c),O.position.top=O.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else H();n&&g(p,!1)},function(){H(),g(p,!1)})};H(),O.query=void 0;var C,U=function(t){C=n(function(){V(t)},h)},q=function(){C&&n.cancel(C)};u.$parsers.unshift(function(t){return d=!0,t&&t.length>=f?h>0?(q(),U(t)):V(t):(g(p,!1),q(),H()),m?t:t?void u.$setValidity("editable",!1):(u.$setValidity("editable",!0),t)}),u.$formatters.push(function(t){var e,a,n={};return $?(n.$model=t,$(p,n)):(n[x.itemName]=t,e=x.viewMapper(p,n),n[x.itemName]=void 0,a=x.viewMapper(p,n),e!==a?e:t)}),O.select=function(t){var e,a,i={};i[x.itemName]=a=O.matches[t].model,e=x.modelMapper(p,i),w(p,e),u.$setValidity("editable",!0),v(p,{$item:a,$model:e,$label:x.viewMapper(p,i)}),H(),n(function(){c[0].focus()},0,!1)},c.bind("keydown",function(t){0!==O.matches.length&&-1!==l.indexOf(t.which)&&(-1!=O.activeIdx||13!==t.which&&9!==t.which)&&(t.preventDefault(),40===t.which?(O.activeIdx=(O.activeIdx+1)%O.matches.length,O.$digest()):38===t.which?(O.activeIdx=(O.activeIdx>0?O.activeIdx:O.matches.length)-1,O.$digest()):13===t.which||9===t.which?O.$apply(function(){O.select(O.activeIdx)}):27===t.which&&(t.stopPropagation(),H(),O.$digest()))}),c.bind("blur",function(){d=!1});var E=function(t){c[0]!==t.target&&(H(),O.$digest())};i.bind("click",E),p.$on("$destroy",function(){i.unbind("click",E),y&&S.remove()});var S=t(I)(O);y?i.find("body").append(S):c.after(S)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(t,e,a){t.templateUrl=a.templateUrl,t.isOpen=function(){return t.matches.length>0},t.isActive=function(e){return t.active==e},t.selectActive=function(e){t.active=e},t.selectMatch=function(e){t.select({activeIdx:e})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(t,e,a,n){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(i,r,o){var l=n(o.templateUrl)(i.$parent)||"template/typeahead/typeahead-match.html";t.get(l,{cache:e}).success(function(t){r.replaceWith(a(t.trim())(i))})}}}]).filter("typeaheadHighlight",function(){function t(t){return t.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(e,a){return a?(""+e).replace(new RegExp(t(a),"gi"),"<strong>$&</strong>"):e}}),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(t,e){function a(t,a){return t.currentStyle?t.currentStyle[a]:e.getComputedStyle?e.getComputedStyle(t)[a]:t.style[a]}function n(t){return"static"===(a(t,"position")||"static")}var i=function(e){for(var a=t[0],i=e.offsetParent||a;i&&i!==a&&n(i);)i=i.offsetParent;return i||a};return{position:function(e){var a=this.offset(e),n={top:0,left:0},r=i(e[0]);r!=t[0]&&(n=this.offset(angular.element(r)),n.top+=r.clientTop-r.scrollTop,n.left+=r.clientLeft-r.scrollLeft);var o=e[0].getBoundingClientRect();return{width:o.width||e.prop("offsetWidth"),height:o.height||e.prop("offsetHeight"),top:a.top-n.top,left:a.left-n.left}},offset:function(a){var n=a[0].getBoundingClientRect();return{width:n.width||a.prop("offsetWidth"),height:n.height||a.prop("offsetHeight"),top:n.top+(e.pageYOffset||t[0].documentElement.scrollTop),left:n.left+(e.pageXOffset||t[0].documentElement.scrollLeft)}},positionElements:function(t,e,a,n){var i,r,o,l,p=a.split("-"),c=p[0],s=p[1]||"center";i=n?this.offset(t):this.position(t),r=e.prop("offsetWidth"),o=e.prop("offsetHeight");var u={center:function(){return i.left+i.width/2-r/2},left:function(){return i.left},right:function(){return i.left+i.width}},d={center:function(){return i.top+i.height/2-o/2},top:function(){return i.top},bottom:function(){return i.top+i.height}};switch(c){case"right":l={top:d[s](),left:u[c]()};break;case"left":l={top:d[s](),left:i.left-r};break;case"bottom":l={top:d[c](),left:u[s]()};break;default:l={top:i.top-o,left:u[s]()}}return l}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(t,e,a){e.addClass("ng-binding").data("$binding",a.bindHtmlUnsafe),t.$watch(a.bindHtmlUnsafe,function(t){e.html(t||"")})}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(t,e,a){var n={$setViewValue:angular.noop};this.init=function(i){n=i,n.$render=this.render,this.stateOn=angular.isDefined(e.stateOn)?t.$parent.$eval(e.stateOn):a.stateOn,this.stateOff=angular.isDefined(e.stateOff)?t.$parent.$eval(e.stateOff):a.stateOff;var r=angular.isDefined(e.ratingStates)?t.$parent.$eval(e.ratingStates):new Array(angular.isDefined(e.max)?t.$parent.$eval(e.max):a.max);t.range=this.buildTemplateObjects(r)},this.buildTemplateObjects=function(t){for(var e=0,a=t.length;a>e;e++)t[e]=angular.extend({index:e},{stateOn:this.stateOn,stateOff:this.stateOff},t[e]);return t},t.rate=function(e){!t.readonly&&e>=0&&e<=t.range.length&&(n.$setViewValue(e),n.$render())},t.enter=function(e){t.readonly||(t.value=e),t.onHover({value:e})},t.reset=function(){t.value=n.$viewValue,t.onLeave()},t.onKeydown=function(e){/(37|38|39|40)/.test(e.which)&&(e.preventDefault(),e.stopPropagation(),t.rate(t.value+(38===e.which||39===e.which?1:-1)))},this.render=function(){t.value=n.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(t,e,a,n){var i=n[0],r=n[1];r&&i.init(r)}}}),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(t){t.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(t){t.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]);